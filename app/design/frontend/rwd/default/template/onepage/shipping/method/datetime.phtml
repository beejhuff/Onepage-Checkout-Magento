<?php
/**
 * Oggetto Web checkout extension for Magento
 *
 * NOTICE OF LICENSE
 *
 * This source file is subject to the Open Software License (OSL 3.0)
 * that is bundled with this package in the file LICENSE.txt.
 * It is also available through the world-wide-web at this URL:
 * http://opensource.org/licenses/osl-3.0.php
 *
 * DISCLAIMER
 *
 * Do not edit or add to this file if you wish to upgrade
 * the Oggetto OnepageCheckout module to newer versions in the future.
 * If you wish to customize the Oggetto OnepageCheckout module for your needs
 * please refer to http://www.magentocommerce.com for more information.
 *
 * @category   design
 * @package    rwd_default
 * @copyright  Copyright (C) 2014 Oggetto Web ltd (http://oggettoweb.com/)
 * @license    http://opensource.org/licenses/osl-3.0.php  Open Software License (OSL 3.0)
 */

/**
 * @var Oggetto_OnepageCheckout_Block_Onepage_Shipping_Method_Datetime $this
 */
?>
<div id="deliveryDateAndTime">
    <?php if ($this->shouldUseCalendar()): ?>
        <div class="form__row delivery-row">
            <label for="deliveryDate" class="required">Date</label>
<!--            <input type="date" name="delivery[date]" id="deliveryDate"/>-->
            <img src="<?php echo $this->getSkinUrl("images/calendar.gif");?>" class="v-middle image-calendar" id="date_trig" />
            <input type="text" name="delivery[date]" id="deliveryDate" />
        </div>
        <script type="text/javascript">// <![CDATA[
            enUS = {"m":{"wide":["January","February","March","April","May","June","July","August",
                "September","October","November","December"],"abbr":["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug",
                "Sep","Oct","Nov","Dec"]}}; // en_US locale reference
            Calendar._DN = ["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]; // full day names
            Calendar._SDN = ["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]; // short day names
            Calendar._FD = 1; // First day of the week. "0" means display Sunday first, "1" means display Monday first, etc.
            Calendar._MN = ["January","February","March","April","May","June","July","August",
                "September","October","November","December"]; // full month names
            Calendar._SMN = ["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]; // short month names
            Calendar._am = "AM"; // am/pm
            Calendar._pm = "PM";

            Calendar._TT = {};
            Calendar._TT["PREV_YEAR"] = "Prev. year (hold for menu)";
            Calendar._TT["PREV_MONTH"] = "Prev. month (hold for menu)";
            Calendar._TT["GO_TODAY"] = "Go Today";
            Calendar._TT["NEXT_MONTH"] = "Next month (hold for menu)";
            Calendar._TT["NEXT_YEAR"] = "Next year (hold for menu)";
            Calendar._TT["SEL_DATE"] = "Select date";
            Calendar._TT["DRAG_TO_MOVE"] = "Drag to move";
            Calendar._TT["PART_TODAY"] = ' (' + "Today" + ')';
            Calendar._TT["DAY_FIRST"] = "Display %s first";
            Calendar._TT["WEEKEND"] = "0,6";
            Calendar._TT["CLOSE"] = "Close";
            Calendar._TT["TODAY"] = "Today";
            Calendar._TT["TIME_PART"] = "(Shift-)Click or drag to change value";

            Calendar._TT["DEF_DATE_FORMAT"] = "%y-%m-%e";
            Calendar._TT["TT_DATE_FORMAT"] = "%y-%m-%e";
            Calendar._TT["WK"] = "Week";
            Calendar._TT["TIME"] = "Time:";

            Calendar.setup({
                inputField : 'deliveryDate',
                ifFormat : '%Y-%m-%e',
                button : 'date_trig',
                align : 'Bl',
                singleClick : true
            });
            // ]]>
        </script>
    <?php endif; ?>

    <?php if ($this->shouldUseTimeRange()): ?>
        <div class="form__row delivery-row">
            <label for="deliveryTime">Time</label>
            <select name="delivery[time]" id="deliveryTime">
                <?php foreach ($this->getTimeRanges() as $_id => $_timeRange): ?>
                    <option value="<?php echo $_id; ?>"><?php echo $this->formatTimeRange($_timeRange); ?></option>
                <?php endforeach;?>
            </select>
        </div>
    <?php endif; ?>
</div>
